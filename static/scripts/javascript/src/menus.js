// Generated by CoffeeScript 1.4.0

define(['jquery', 'kinetic', 'tools'], function($, K, tools) {
  var FrontPage;
  FrontPage = (function() {

    function FrontPage(game, stage, baseLayer) {
      var buttonLayer, buttonText, ground, h, laoshi, logo, startGame, startGameButton, w,
        _this = this;
      this.game = game;
      this.stage = stage;
      this.baseLayer = baseLayer;
      console.log('constructing the fucking frontpage');
      game = this.game;
      stage = this.stage;
      baseLayer = this.baseLayer;
      console.log("stage is!", stage);
      w = stage.getWidth();
      h = stage.getHeight();
      console.log("attempting to draw logo");
      logo = tools.createImage({
        stage: stage,
        name: 'logo',
        src: 'static/images/logo.png',
        top: 0.2,
        left: 0.5,
        width: 1.0,
        marginLeft: -0.5,
        marginTop: -0.5,
        callback: function(image) {
          baseLayer.add(image);
          return baseLayer.draw();
        }
      });
      console.log("logo is", logo);
      laoshi = tools.createImage({
        stage: stage,
        name: 'laoshi',
        src: 'static/images/laoshi.png',
        top: 0.95,
        left: 0.5,
        width: 0.5,
        height: 0.5,
        marginTop: -1.0,
        marginLeft: 0.0,
        callback: function(image) {
          baseLayer.add(image);
          return baseLayer.draw();
        }
      });
      ground = new K.Rect({
        x: 0,
        y: h * 0.9,
        width: w,
        height: h * 0.1,
        name: 'ground',
        fill: '#170801',
        stroke: 'none',
        strokeWidth: 0
      });
      baseLayer.add(ground);
      buttonLayer = new K.Layer({
        'name': 'buttons'
      });
      startGame = tools.createRect({
        stage: stage,
        top: 0.3,
        left: 0.5,
        width: 0.5,
        marginLeft: -0.5,
        marginTop: 0,
        height: 60,
        name: 'startGame',
        fill: '#f2f2ea',
        stroke: '#259bcb',
        strokeWidth: 5
      });
      tools.addShadow(startGame);
      buttonText = new K.Text({
        x: w * 0.5 - startGame.getWidth() / 2,
        y: h * 0.3,
        text: 'Story',
        fontSize: 40,
        fontFamily: 'karatemedium',
        fill: 'black',
        align: 'center',
        width: startGame.getWidth(),
        padding: 10
      });
      startGameButton = new K.Group();
      startGameButton.add(startGame);
      startGameButton.add(buttonText);
      startGameButton.on('mouseup touchend', function() {
        return $.event.trigger("request-levels-menu");
      });
      startGameButton.on('mouseover', function() {
        startGame.setStroke('#3e6473');
        document.body.style.cursor = 'pointer';
        return buttonLayer.draw();
      });
      startGameButton.on('mouseout', function() {
        startGame.setStroke('#259bcb');
        document.body.style.cursor = 'default';
        return buttonLayer.draw();
      });
      buttonLayer.add(startGameButton);
      stage.add(buttonLayer);
      setTimeout(function() {
        baseLayer.draw();
        return buttonLayer.draw();
      }, 200);
    }

    return FrontPage;

  })();
  return FrontPage;
});
