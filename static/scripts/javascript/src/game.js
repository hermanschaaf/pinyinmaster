// Generated by CoffeeScript 1.4.0

console.log("WTF");

define(['jquery', 'kinetic', 'levels', 'menus', 'play'], function($, K, LevelsPage, FrontPage, PlayLevel) {
  var Game;
  Game = (function() {

    function Game(container) {
      var _this = this;
      this.container = container;
      this.width = $(window).width();
      this.height = $(window).height();
      console.log(this.width, this.height);
      this.stage = new K.Stage({
        container: this.container,
        width: this.width,
        height: this.height
      });
      this.layer = new K.Layer();
      this.stage.add(this.layer);
      $(document).bind("request-levels-menu", function() {
        return _this.showLevels({});
      });
      $(document).bind("request-level-start", function(e, level) {
        console.log('clicked and level is', level);
        return _this.startLevel({});
      });
    }

    Game.prototype.startGame = function() {
      var frontpage;
      console.log('starting game!');
      return frontpage = new FrontPage(this, this.stage, this.layer);
    };

    Game.prototype.showLevels = function(_arg) {
      var levelsPage, page;
      page = _arg.page;
      console.log('showing levels');
      if (page == null) {
        page = 0;
      }
      this.stage.removeChildren();
      this.menuLayer = new K.Layer();
      this.stage.add(this.menuLayer);
      return levelsPage = new LevelsPage(this, this.menuLayer);
    };

    Game.prototype.startLevel = function(level) {
      console.log('starting level! ' + level);
      this.stage.removeChildren();
      this.gameLayer = new K.Layer();
      return level = new PlayLevel(this, this.gameLayer, level);
    };

    return Game;

  })();
  return Game;
});
